local Library = loadstring(game:HttpGet(("https://raw.githubusercontent.com/bloodball/-back-ups-for-libs/main/wizard")))()
local Window = Library:NewWindow("Credits: TGMANKASKE")
local Section = Window:NewSection("Script")

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local localPlayer = Players.LocalPlayer

-- Busca remotes recursivamente
local function getAllRemotes(container)
    local remotes = {}
    for _, child in ipairs(container:GetChildren()) do
        if child:IsA("RemoteEvent") or child:IsA("RemoteFunction") then
            remotes[#remotes+1] = child
        elseif #child:GetChildren() > 0 then
            for _, r in ipairs(getAllRemotes(child)) do
                remotes[#remotes+1] = r
            end
        end
    end
    return remotes
end

local allRemotes = getAllRemotes(ReplicatedStorage)

local GivePackageRemote, GivePackageToPlayer, SellAllItemsRemote

local function containsIgnoreCase(s, sub)
    return string.find(string.lower(s), string.lower(sub)) ~= nil
end

for _, remote in ipairs(allRemotes) do
    local n = remote.Name
    if containsIgnoreCase(n, "GivePackageRemote") then
        GivePackageRemote = remote
    elseif containsIgnoreCase(n, "GivePackageToPlayer") then
        GivePackageToPlayer = remote
    elseif containsIgnoreCase(n, "SellAllItems") then
        SellAllItemsRemote = remote
    end
end

if not SellAllItemsRemote then
    warn("SellAllItems Remote não encontrado")
end

local farm_active = false

-- Função de venda única e otimizada
local function fireSellAll()
    if not SellAllItemsRemote then return end
    if typeof(SellAllItemsRemote.FireServer) == "function" then
        SellAllItemsRemote:FireServer()
    elseif typeof(SellAllItemsRemote.InvokeServer) == "function" then
        SellAllItemsRemote:InvokeServer()
    end
end

-- Toggle farm rápido sem atrasos
Section:CreateToggle("Farm Packages (FAST)", function(state)
    farm_active = state
    if farm_active then
        task.spawn(function()
            while farm_active do
                -- Farm packages...
                if GivePackageToPlayer and typeof(GivePackageToPlayer.FireServer) == "function" then
                    local pkgNames = {}
                    for _, obj in ipairs(ReplicatedStorage:GetChildren()) do
                        if containsIgnoreCase(obj.Name, "Package") then
                            pkgNames[#pkgNames+1] = obj.Name
                        end
                    end
                    for _, name in ipairs(pkgNames) do
                        GivePackageToPlayer:FireServer(localPlayer, name)
                    end
                end
                task.wait()
            end
        end)
    end
end)

-- Botão para vender todos os itens manualmente (1x por clique)
Section:CreateButton("Sell All Items", function()
    fireSellAll()
    print("Sell All Items executado")
end)
